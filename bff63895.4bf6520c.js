(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{118:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return o})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return p}));var r=t(2),a=t(6),i=(t(0),t(129)),c={id:"22_signing",title:"Signing of Layout or Link",sidebar_label:"Signing"},o={id:"70_reference/22_signing",title:"Signing of Layout or Link",description:":::caution",source:"@site/docs/70_reference/22_signing.md",permalink:"/docs/70_reference/22_signing",editUrl:"https://github.com/argosnotary/docs/tree/master/docs/70_reference/22_signing.md",sidebar_label:"Signing",sidebar:"docs",previous:{title:"Link",permalink:"/docs/70_reference/21_link"},next:{title:"Verification of a software package",permalink:"/docs/70_reference/23_verification"}},s=[{value:"MetaBlock",id:"metablock",children:[]},{value:"Specification",id:"specification",children:[]},{value:"JSON sample",id:"json-sample",children:[]},{value:"Sign",id:"sign",children:[]}],l={rightToc:s};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This is page is work in progress"))),Object(i.b)("p",null,"Every Link is signed 1 time and every Layout 1 or more times. This signature is stored\nin the metablock which is wrapping the link or layout."),Object(i.b)("p",null,"The objects to sign are serialized to JSON strings witch are canonalized by removing all\nwhitespace and sorting all attributes. After this the JSON string is signed by ",Object(i.b)("inlineCode",{parentName:"p"},"SHA256withRSA"),"."),Object(i.b)("h2",{id:"metablock"},"MetaBlock"),Object(i.b)("p",null,Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"/img/plantuml/70_reference_metablock.svg",alt:"MetaBlock"}))),Object(i.b)("h2",{id:"specification"},"Specification"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"type LayoutMetaBlock = {\n    signature: Signature[],\n    layout: Layout\n}\n\ntype LinkMetaBlock = {\n    signature: Signature,\n    supplyChainId: String,\n    link: Link\n}\n\ntype Signature = {\n    keyId: sha256 hash of public key,\n    signature: sha256 with rsa signature of link or layout\n}\n")),Object(i.b)("h2",{id:"json-sample"},"JSON sample"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),'{\n  "link": {\n    "runId": "69af2dd",\n    "layoutSegmentName": "segment1",\n    "materials": [\n      {\n        "uri": "src/test/java/com/rabobank/argos/test/ArgosServiceTestIT.java",\n        "hash": "61a0af2b177f02a14bab478e68d4907cda4dc3f642ade0432da8350ca199302b"\n      }\n    ],\n    "stepName": "build",\n    "products": [\n      {\n        "uri": "src/test/java/com/rabobank/argos/test/ArgosServiceTestIT.java",\n        "hash": "61a0af2b177f02a14bab478e68d4907cda4dc3f642ade0432da8350ca199302b"\n      }\n    ]\n  }\n}\n')),Object(i.b)("h2",{id:"sign"},"Sign"))}p.isMDXComponent=!0},129:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),p=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o({},n,{},e)),t},b=function(e){var n=p(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=p(t),d=r,m=b["".concat(c,".").concat(d)]||b[d]||u[d]||i;return t?a.a.createElement(m,o({ref:n},l,{components:t})):a.a.createElement(m,o({ref:n},l))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,c=new Array(i);c[0]=d;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var l=2;l<i;l++)c[l]=t[l];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);