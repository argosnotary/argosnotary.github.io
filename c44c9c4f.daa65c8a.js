(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{160:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return o})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return u}));var n=a(2),r=a(9),s=(a(0),a(172)),i={id:"20_authorization",title:"Authorization",sidebar_label:"Authorization"},o={id:"50_security/20_authorization",isDocsHomePage:!1,title:"Authorization",description:"This is page is work in progress",source:"@site/docs/50_security/20_authorization.md",permalink:"/docs/50_security/20_authorization",editUrl:"https://github.com/argosnotary/docs/tree/master/docs/50_security/20_authorization.md",sidebar_label:"Authorization",sidebar:"docs",previous:{title:"Authentication",permalink:"/docs/50_security/10_authentication"},next:{title:"wip",permalink:"/docs/60_supplychain_management/10_wip"}},c=[{value:"Introduction",id:"introduction",children:[{value:"Attribute based access",id:"attribute-based-access",children:[]},{value:"Role based access",id:"role-based-access",children:[]},{value:"Permissions",id:"permissions",children:[]},{value:"Service Accounts",id:"service-accounts",children:[]},{value:"Permission Management",id:"permission-management",children:[]},{value:"Roles",id:"roles",children:[]}]}],l={rightToc:c};function u(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(s.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(s.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(s.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"This is page is work in progress"))),Object(s.b)("h2",{id:"introduction"},"Introduction"),Object(s.b)("p",null,"The authorization model in argos is a combination of role based access and attribute based access control.\nFor both methods permissions are used to grant access to a resource endpoint.\nIn the explanation below when we mention a user we mean either a personal account or a service (system) account."),Object(s.b)("h3",{id:"attribute-based-access"},"Attribute based access"),Object(s.b)("p",null,"For the attribute based approach the access is based on the permissions in the label hierarchy.\nThe label hierarchy can be seen as a virtual directory system with permissions attached to a particular label for a particular user.\nInside a label there can be other labels a supply chains or service accounts.\nMost endpoints are connected to the hierarchy via either a service account or via the supplychain identifier.\nThe permissions for a label cascade and aggregate up the hierarchy tree (meaning from the root label towards the branches)."),Object(s.b)("p",null,"For example we have a hierarchy consisting of one root label A and two child labels B and C and 2 supplychains SB under B and SC under C.\nIf the user has READ permissions on label A he/she also has read permission on labels B and C and their respective supply chains.\nIf the user has LAYOUT_ADD permission on label B then he/she is only allowed to add or edit a layout on the supplychain under B but not under C.\nThis principle is illustrated in the diagram below:\n",Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/img/security/hierarchy-permissions.svg",alt:"Hierarchy permission example 1"}))),Object(s.b)("p",null,"An exception to the general rule is made for READ permissions these permissions also cascade down the hierarchy.\nWhen in the example above a READ permission is set on B but not on A then A is still visible to the user.\nSee diagram below for an illustration:\n",Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/img/security/hierarchy-permissions-2.svg",alt:"Hierarchy permission example 2"}))),Object(s.b)("h3",{id:"role-based-access"},"Role based access"),Object(s.b)("p",null,"Role based access is used to resolve permissons in order to allow access to endpoints which are not connected to the hierarchy described above.\nThis can be for example to allow users to see their personal account details or to allow administrators to create root labels and grant other users permissions to these labels."),Object(s.b)("h3",{id:"permissions"},"Permissions"),Object(s.b)("p",null,"The following permissions are defined:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"READ the user is granted access to read operations."),Object(s.b)("li",{parentName:"ul"},"TREE_EDIT the user is granted access to crud operations on labels and supply chains."),Object(s.b)("li",{parentName:"ul"},"LOCAL_PERMISSION_EDIT the user is granted access to operations that change permissions for users on labels."),Object(s.b)("li",{parentName:"ul"},"ASSIGN_ROLE the user is granted access to assign a role to a user."),Object(s.b)("li",{parentName:"ul"},"LINK_ADD the user is granted access add a link this is default for service accounts and can be assigned to personal accounts when a manual approval step is required."),Object(s.b)("li",{parentName:"ul"},"LAYOUT_ADD the user is granted access to sign and store a layout."),Object(s.b)("li",{parentName:"ul"},"VERIFY the user is granted access to perform a verification run for the supply chain."),Object(s.b)("li",{parentName:"ul"},"PERSONAL_ACCOUNT_READ the user is granted access to get access to the account details."),Object(s.b)("li",{parentName:"ul"},"SERVICE_ACCOUNT_EDIT the user is granted access to create a service account.")),Object(s.b)("h3",{id:"service-accounts"},"Service Accounts"),Object(s.b)("p",null,"A Service account is an account which is created for a system to interact with the argos notary service.\nThis account is always connected to a particular label in the hierarchy and has a fixed immutable set of permissions,\nLINK_ADD and VERIFY."),Object(s.b)("p",null,"Examples of systems that use a service account are for example a jenkins or xldeploy server.\nWhen creating a service account on a label a public private keypair is also created for this account."),Object(s.b)("h3",{id:"permission-management"},"Permission Management"),Object(s.b)("p",null,"Permission management can be done by any personal account user if granted the LOCAL_PERMISSION_EDIT permission on a label.\nIf the personal account has an administrator role assigned a LOCAL_PERMISSION_EDIT permission on root labels is granted."),Object(s.b)("h3",{id:"roles"},"Roles"),Object(s.b)("p",null,"Role based access is done on endpoints that are not connected to the hierarchy these roles have predefined sets of permissions.\nAt the time of writing there is no functionality implemented to manage roles."),Object(s.b)("p",null,"The following roles are defined:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"USER every new personal account registration gets this role assigned this role has one permission PERSONAL_ACCOUNT_READ allowing the user to see their account details."),Object(s.b)("li",{parentName:"ul"},"ADMINISTRATOR the first personal account registration on a clean install of the argos notary service gets the role ADMINISTRATOR assigned.")),Object(s.b)("p",null,"The following (global) permissions are assigned to this role:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"READ"),Object(s.b)("li",{parentName:"ul"},"LOCAL_PERMISSION_EDIT"),Object(s.b)("li",{parentName:"ul"},"TREE_EDIT"),Object(s.b)("li",{parentName:"ul"},"VERIFY"),Object(s.b)("li",{parentName:"ul"},"ASSIGN_ROLE")))}u.isMDXComponent=!0},172:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},b=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),b=u(a),d=n,h=b["".concat(i,".").concat(d)]||b[d]||p[d]||s;return a?r.a.createElement(h,o(o({ref:t},l),{},{components:a})):r.a.createElement(h,o({ref:t},l))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,i=new Array(s);i[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var l=2;l<s;l++)i[l]=a[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);