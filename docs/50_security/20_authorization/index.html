<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">Authorization | Argos Notary</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Authorization | Argos Notary"><meta data-react-helmet="true" name="description" content=":::caution"><meta data-react-helmet="true" property="og:description" content=":::caution"><meta data-react-helmet="true" property="og:url" content="https://argosnotary.github.io/docs/50_security/20_authorization">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.688739d6.css">


<link rel="preload" href="/styles.bab3b390.js" as="script">

<link rel="preload" href="/runtime~main.83959826.js" as="script">

<link rel="preload" href="/main.1f938de8.js" as="script">

<link rel="preload" href="/1.736ec963.js" as="script">

<link rel="preload" href="/2.8abb90c6.js" as="script">

<link rel="preload" href="/31.5983180c.js" as="script">

<link rel="preload" href="/20ac7829.195b34ae.js" as="script">

<link rel="preload" href="/17896441.f6600006.js" as="script">

<link rel="preload" href="/c44c9c4f.35c1180c.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Argos Notary Logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/00_overview/10_overview">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/argosnotary" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Argos Notary Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" position="left" href="/docs/00_overview/10_overview">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/argosnotary" class="menu__link" position="right">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/00_overview/10_overview">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/10_get_started/10_get_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/10_get_started/20_examples">Some examples</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/20_architecture/10_architecture">Architecture</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Architectural Decisions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/20_architecture/20_decisions/10_intro">ADR</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/20_architecture/20_decisions/99_template">Decision Template</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/30_installation/10_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/30_installation/20_upgrade">Upgrade</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">System administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/40_administration/10_maintenance">Maintenance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/40_administration/20_recover">Recover Admin</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/50_security/10_authentication">Authentication</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/docs/50_security/20_authorization">Authorization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Supply Chain management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/60_supplychain_management/10_wip">wip</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extensions</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Approvals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/65_extensions/10_approvals/10_approval_collector">Approval framework</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/65_extensions/10_approvals/20_xldeploy_approval_collector">XL Deploy Approval</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/65_extensions/10_approvals/30_git_approval_collector">Git Approval</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/70_reference/10_terminology">Terminology</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/70_reference/20_layout">Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/70_reference/21_link">Link</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/70_reference/22_signing">Signing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/70_reference/23_verification">Verification</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Helm Charts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" to="https://github.com/argosnotary/charts/blob/master/argosnotary/README.md" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://github.com/argosnotary/charts/blob/master/argosnotary/README.md">Argos Notary</a></li><li class="menu__list-item"><a class="menu__link" to="https://github.com/argosnotary/charts/blob/master/xldeploy-argos-collector/README.md" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://github.com/argosnotary/charts/blob/master/xldeploy-argos-collector/README.md">XLDeploy Collector</a></li><li class="menu__list-item"><a class="menu__link" to="https://github.com/argosnotary/charts/blob/master/git-argos-collector/README.md" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://github.com/argosnotary/charts/blob/master/git-argos-collector/README.md">Git Collector</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Javadocs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" to="https://argosnotary.github.io/generated/javadoc/argos-service" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://argosnotary.github.io/generated/javadoc/argos-service">argos-service</a></li><li class="menu__list-item"><a class="menu__link" to="https://argosnotary.github.io/generated/javadoc/argos4j" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://argosnotary.github.io/generated/javadoc/argos4j">argos4j</a></li></ul></li><li class="menu__list-item"><a class="menu__link" to="https://argosnotary.github.io/generated/openapi" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://argosnotary.github.io/generated/openapi">REST api</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/80_contributing/10_contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/80_contributing/20_code_of_conduct">Code of Conduct</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Authorization</h1></header><div class="markdown"><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>This is page is work in progress</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="introduction"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a>Introduction</h2><p>The authorization model in argos is a combination of role based access and attribute based access control.
For both methods permissions are used to grant access to a resource endpoint.
In the explanation below when we mention a user we mean either a personal account or a service (system) account.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="attribute-based-access"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#attribute-based-access" title="Direct link to heading">#</a>Attribute based access</h3><p>For the attribute based approach the access is based on the permissions in the label hierarchy.
The label hierarchy can be seen as a virtual directory system with permissions attached to a particular label for a particular user.
Inside a label there can be other labels a supply chains or service accounts.
Most endpoints are connected to the hierarchy via either a service account or via the supplychain identifier.
The permissions for a label cascade and aggregate up the hierarchy tree (meaning from the root label towards the branches).</p><p>For example we have a hierarchy consisting of one root label A and two child labels B and C and 2 supplychains SB under B and SC under C.
If the user has READ permissions on label A he/she also has read permission on labels B and C and their respective supply chains.
If the user has LAYOUT_ADD permission on label B then he/she is only allowed to add or edit a layout on the supplychain under B but not under C.
This principle is illustrated in the diagram below:
<img src="/img/hierarchy-permissions.svg" alt="Hierarchy permission example 1"></p><p>An exception to the general rule is made for READ permissions these permissions also cascade down the hierarchy.
When in the example above a READ permission is set on B but not on A then A is still visible to the user.
See diagram below for an illustration:
<img src="/img/hierarchy-permissions-2.svg" alt="Hierarchy permission example 2"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="role-based-access"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#role-based-access" title="Direct link to heading">#</a>Role based access</h3><p>Role based access is used to resolve permissons in order to allow access to endpoints which are not connected to the hierarchy described above.
This can be for example to allow users to see their personal account details or to allow administrators to create root labels and grant other users permissions to these labels.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="permissions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#permissions" title="Direct link to heading">#</a>Permissions</h3><p>The following permissions are defined:</p><ul><li>READ the user is granted access to read operations.</li><li>TREE_EDIT the user is granted access to crud operations on labels and supply chains.</li><li>LOCAL_PERMISSION_EDIT the user is granted access to operations that change permissions for users on labels.</li><li>ASSIGN_ROLE the user is granted access to assign a role to a user.</li><li>LINK_ADD the user is granted access add a link this is default for service accounts and can be assigned to personal accounts when a manual approval step is required.</li><li>LAYOUT_ADD the user is granted access to sign and store a layout.</li><li>VERIFY the user is granted access to perform a verification run for the supply chain.</li><li>PERSONAL_ACCOUNT_READ the user is granted access to get access to the account details.</li><li>SERVICE_ACCOUNT_EDIT the user is granted access to create a service account.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service-accounts"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#service-accounts" title="Direct link to heading">#</a>Service Accounts</h3><p>A Service account is an account which is created for a system to interact with the argos notary service.
This account is always connected to a particular label in the hierarchy and has a fixed immutable set of permissions,
LINK_ADD and VERIFY.</p><p>Examples of systems that use a service account are for example a jenkins or xldeploy server.
When creating a service account on a label a public private keypair is also created for this account.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="permission-management"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#permission-management" title="Direct link to heading">#</a>Permission Management</h3><p>Permission management can be done by any personal account user if granted the LOCAL_PERMISSION_EDIT permission on a label.
If the personal account has an administrator role assigned a LOCAL_PERMISSION_EDIT permission on root labels is granted.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="roles"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#roles" title="Direct link to heading">#</a>Roles</h3><p>Role based access is done on endpoints that are not connected to the hierarchy these roles have predefined sets of permissions.
At the time of writing there is no functionality implemented to manage roles.</p><p>The following roles are defined:</p><ul><li>USER every new personal account registration gets this role assigned this role has one permission PERSONAL_ACCOUNT_READ allowing the user to see their account details.</li><li>ADMINISTRATOR the first personal account registration on a clean install of the argos notary service gets the role ADMINISTRATOR assigned.</li></ul><p>The following (global) permissions are assigned to this role:</p><ul><li>READ</li><li>LOCAL_PERMISSION_EDIT</li><li>TREE_EDIT</li><li>VERIFY</li><li>ASSIGN_ROLE</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/argosnotary/docs/tree/master/docs/50_security/20_authorization.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/50_security/10_authentication"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Authentication</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/60_supplychain_management/10_wip"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">wip »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#introduction" class="contents__link">Introduction</a><ul><li><a href="#attribute-based-access" class="contents__link">Attribute based access</a></li><li><a href="#role-based-access" class="contents__link">Role based access</a></li><li><a href="#permissions" class="contents__link">Permissions</a></li><li><a href="#service-accounts" class="contents__link">Service Accounts</a></li><li><a href="#permission-management" class="contents__link">Permission Management</a></li><li><a href="#roles" class="contents__link">Roles</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://link.naar.so">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/argosnotary">Twitter</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Argos Notary, Built with Docusaurus.</div></div></div></footer>
</div>

<script src="/styles.bab3b390.js"></script>

<script src="/runtime~main.83959826.js"></script>

<script src="/main.1f938de8.js"></script>

<script src="/1.736ec963.js"></script>

<script src="/2.8abb90c6.js"></script>

<script src="/31.5983180c.js"></script>

<script src="/20ac7829.195b34ae.js"></script>

<script src="/17896441.f6600006.js"></script>

<script src="/c44c9c4f.35c1180c.js"></script>


</body>
</html>