(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{112:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return s}));var r=n(2),a=n(6),o=(n(0),n(129)),i={id:"30_developing",title:"Building, Testing and Releasing Argos Argos Notary",sidebar_label:"Developing"},c={id:"80_contributing/30_developing",title:"Building, Testing and Releasing Argos Argos Notary",description:":::caution",source:"@site/docs/80_contributing/30_developing.md",permalink:"/docs/80_contributing/30_developing",editUrl:"https://github.com/argosnotary/docs/tree/master/docs/80_contributing/30_developing.md",sidebar_label:"Developing",sidebar:"docs",previous:{title:"Contributor Code of Conduct",permalink:"/docs/80_contributing/20_code_of_conduct"}},l=[{value:"Prerequisite Software",id:"prerequisite-software",children:[]},{value:"Getting the Sources",id:"getting-the-sources",children:[]},{value:"Building",id:"building",children:[]},{value:"Running Tests Locally",id:"running-tests-locally",children:[]},{value:"Create a Release",id:"create-a-release",children:[]}],b={rightToc:l};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(o.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(o.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"This is page is work in progress"))),Object(o.b)("p",null,"This document describes how to set up your development environment to build and test Argos.\nIt also explains the basic mechanics of using ",Object(o.b)("inlineCode",{parentName:"p"},"git"),", ",Object(o.b)("inlineCode",{parentName:"p"},"maven"),"."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#prerequisite-software"}),"Prerequisite Software")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#getting-the-sources"}),"Getting the Sources")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#building"}),"Building")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#running-tests-locally"}),"Running Tests Locally")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#create-a-release"}),"Create a Release")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#administrator"}),"Adminstrator recovery"))),Object(o.b)("p",null,"See the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/argosnotary/argos-parent/blob/master/CONTRIBUTING.md"}),"contribution guidelines"),"\nif you'd like to contribute to Argos."),Object(o.b)("h2",{id:"prerequisite-software"},"Prerequisite Software"),Object(o.b)("p",null,"Before you can build and test Argos, you must install and configure the\nfollowing products on your development machine:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"http://git-scm.com"}),"Git")," and/or the ",Object(o.b)("strong",{parentName:"p"},"GitHub app")," (for ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"http://mac.github.com"}),"Mac")," or\n",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"http://windows.github.com"}),"Windows"),"); ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://help.github.com/articles/set-up-git"}),"GitHub's Guide to Installing\nGit")," is a good source of information.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://maven.apache.org"}),"Maven"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://projectlombok.org"}),"Lombok"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.docker.com"}),"Docker"),"."))),Object(o.b)("h2",{id:"getting-the-sources"},"Getting the Sources"),Object(o.b)("p",null,"Fork and clone the Argos repository:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Login to your GitHub account or create one by following the instructions given\n",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/signup/free"}),"here"),"."),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://help.github.com/forking"}),"Fork")," the ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/argosnotary/argos"}),"main Argos\nrepository"),"."),Object(o.b)("li",{parentName:"ol"},"Clone your fork of the Argos repository and define an ",Object(o.b)("inlineCode",{parentName:"li"},"upstream")," remote pointing back to\nthe Argos repository that you forked in the first place.")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"# Clone your GitHub repository:\ngit clone git@github.com:<github username>/argos.git\n\n# Go to the Argos directory:\ncd argos\n\n# Add the main Argos repository as an upstream remote to your repository:\ngit remote add upstream https://github.com/argosnotary/argos.git\n")),Object(o.b)("h2",{id:"building"},"Building"),Object(o.b)("p",null,"To build Argos run:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"mvn clean install\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Results are put in the diverse ",Object(o.b)("inlineCode",{parentName:"li"},"target")," folders.")),Object(o.b)("h2",{id:"running-tests-locally"},"Running Tests Locally"),Object(o.b)("p",null,"You should execute all test suites before submitting a PR to GitHub:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"mvn -q clean install\ncd argos-test\nmvn -q clean verify -Pregression-test-drone\n\n")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note"),": The first test run will be much slower than future runs. This is because future runs will\nbenefit from Bazel's capability to do incremental builds."),Object(o.b)("p",null,"All the tests are executed on our Continuous Integration infrastructure. PRs can only be\nmerged if the code is formatted properly and all tests are passing."),Object(o.b)("a",{name:"clang-format"}),"## Formatting your source code",Object(o.b)("p",null,"Argos uses ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"http://clang.llvm.org/docs/ClangFormat.html"}),"clang-format")," to format the source code.\nIf the source code is not properly formatted, the CI will fail and the PR cannot be merged."),Object(o.b)("p",null,"A better way is to set up your IDE to format the changed file on each file save."),Object(o.b)("h2",{id:"create-a-release"},"Create a Release"),Object(o.b)("p",null,"A release creates the following artifacts:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"docker.io/argosnotary/argos-service:","[version]"),Object(o.b)("li",{parentName:"ul"},"docker.io/argosnotary/argos-frontend:","[version]"),Object(o.b)("li",{parentName:"ul"},"com.rabobank.argos.argos4j in Maven Central"),Object(o.b)("li",{parentName:"ul"},"com.rabobank.argos.argos-service in Maven Central")),Object(o.b)("p",null,"A release can only be made of the master branch."),Object(o.b)("p",null,"We use Semantic Versioning as stated on ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"http://semver.org"}),"semver.org")),Object(o.b)("p",null,"To make a release perform the following actions:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"When necessary change the version")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"    tools/change_project_version.sh [version]\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Create a tag and push to github:")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"    tools/release_with_tag.sh [version]\n")),Object(o.b)("p",null,"After this drone.io will create and publish a release."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Change the version to the possible future version.")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"    tools/change_project_version.sh [future version]\n")),Object(o.b)("p",null,"This version can always be changed in a future release."))}s.isMDXComponent=!0},129:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return g}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.a.createContext({}),s=function(e){var t=a.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},u=function(e){var t=s(e.components);return a.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,b=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,g=u["".concat(i,".").concat(m)]||u[m]||p[m]||o;return n?a.a.createElement(g,c({ref:t},b,{components:n})):a.a.createElement(g,c({ref:t},b))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var b=2;b<o;b++)i[b]=n[b];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);